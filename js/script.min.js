$(function(){setInterval(()=>{let e=document.querySelector(".preloader");e.style.opacity=0,setTimeout(()=>{e.style.display="none"},2500)},2500);let e={noScrolling:!0,waitingTime:2e3,tabsNum:4,currentTab:0,switcherWrap:document.querySelector(".switcher"),tabsSwitchers:document.querySelectorAll(".switcher__item"),tabsItems:document.querySelectorAll(".tab-item"),inputs:document.querySelectorAll(".form_input"),isFocused:!1,popupIsVisible:!1,start:function(){let e,t,o=this;function r(e){sessionStorage.setItem("currentTab",e);for(let e=0;e<o.tabsItems.length;e++)o.tabsSwitchers[e].style.background="#ddd";o.tabsSwitchers[e].style.background="red",$("html, body").animate({scrollTop:o.tabsItems[e].offsetTop},500),o.tabsItems[e].scrollIntoView({behavior:"smooth"}),window.scrollTo({top:o.tabsItems[e].offsetTop,behavior:"smooth"})}function s(e,t){if(t)e<0&&o.currentTab>=0&&o.currentTab<3&&1==o.noScrolling&&(o.noScrolling=!1,o.currentTab++,r(o.currentTab)),e>0&&o.currentTab>0&&o.currentTab<=3&&1==o.noScrolling&&(o.noScrolling=!1,o.currentTab--,r(o.currentTab));else switch(e){case 49:case 97:0==o.isFocused&&(o.currentTab=0,r(o.currentTab));break;case 50:case 98:0==o.isFocused&&(o.currentTab=1,r(o.currentTab));break;case 51:case 99:0==o.isFocused&&(o.currentTab=2,r(o.currentTab));break;case 52:case 100:0==o.isFocused&&(o.currentTab=3,r(o.currentTab));break;case 38:case 87:case 33:0!=o.currentTab&&(o.currentTab--,r(o.currentTab));break;case 40:case 83:case 34:3!=o.currentTab&&(o.currentTab++,r(o.currentTab));break;case 0:case 1:case 2:case 3:r(e)}}function n(){0==o.popupIsVisible&&(s(event.wheelDelta,1),o.noScrolling=!1,document.removeEventListener("wheel",n),document.removeEventListener("mousewheel",n),setTimeout(function(){o.noScrolling=!0},o.waitingTime),setTimeout(function(){document.addEventListener("mousewheel",n),document.addEventListener("wheel",n)},o.waitingTime+800))}sessionStorage.getItem("currentTab")?(r(sessionStorage.getItem("currentTab")),o.currentTab=parseInt(sessionStorage.getItem("currentTab"))):r(0),this.inputs.forEach(function(e,t){e.addEventListener("focus",function(){o.isFocused=!0}),e.addEventListener("blur",function(){o.isFocused=!1})});document.querySelector(".about-me__description");document.addEventListener("wheel",n),document.addEventListener("mousewheel",n),document.addEventListener("touchstart",function(o){e=o.touches[0].clientX,t=o.touches[0].clientY}),document.addEventListener("touchmove",function(o){o.preventDefault();let r=o.touches[0];if(changeX=e-r.clientX,changeY=t-r.clientY,changeY<0)return}),document.addEventListener("touchend",function(e){e.changedTouches[0].clientX;let s=t-e.changedTouches[0].clientY,n=(screen.width,screen.height/3.5);(s<-n||s>n)&&(s<0?0!=o.currentTab&&(o.currentTab--,r(o.currentTab)):3!=o.currentTab&&(o.currentTab++,r(o.currentTab)))}),this.tabsSwitchers.forEach(function(e,t){e.addEventListener("click",function(){o.currentTab=t,s(t)}),e.addEventListener("touchstart",function(e){o.currentTab=t,s(t)})}),document.addEventListener("keydown",function(e){s(e.keyCode)})}},t={titles:document.querySelectorAll(".title"),subtitles:document.querySelectorAll(".subtitle"),twoDots:document.querySelectorAll(".two-dots"),wrap:document.querySelectorAll(".wrap"),hover:document.querySelectorAll(".hover"),watchLinks:document.querySelectorAll(".watch"),popup:document.querySelector(".popup"),popupClose:document.querySelector(".popup__close"),portfolioItems:document.querySelectorAll(".portfolio__item"),portfolioOverlays:document.querySelectorAll(".portfolio__overlay"),popupOverlay:document.querySelector(".overlay"),start:function(){let t,o=this,r=$(".more-wrap"),s=500,n=document.querySelector(".popup__img"),i=(document.querySelector(".popup__content"),document.querySelector(".popup__go"));function c(t){e.popupIsVisible=!0,e.noScrolling=!1,t.preventDefault();let r=this.parentNode.parentNode.previousElementSibling,c=this.nextElementSibling.querySelector("a").getAttribute("href"),a=r.getAttribute("src"),l=r.getAttribute("height");n.setAttribute("src",a),window.innerWidth<=1080?n.setAttribute("height",`${parseInt(l,10)/2+"%"}`):n.setAttribute("height",l),i.setAttribute("href",c),o.popup.style.display="flex",setTimeout(function(){o.popup.classList.add("active")},s)}function a(t){(t.target.classList.contains("overlay")||t.target.classList.contains("popup__close"))&&(e.popupIsVisible=!1,e.noScrolling=!0,o.popup.classList.remove("active"),setTimeout(function(){o.popup.style.display="none"},s))}i.addEventListener("mouseover",function(){i.style.opacity=".9"}),i.addEventListener("mouseleave",function(){i.style.opacity=".6"}),n.addEventListener("mouseenter",function(e){i.style.opacity=".55"}),n.addEventListener("mouseleave",function(e){i.style.opacity="0"}),o.watchLinks.forEach(function(e,t){e.addEventListener("click",c),e.addEventListener("touchstart",c)}),o.popupOverlay.addEventListener("click",a),o.popupOverlay.addEventListener("touchstart",a),$("form").submit(function(e){var t=$(this),o=document.querySelector("textarea"),r=$(".error-wrap");switch($.ajax({type:"POST",url:"../php/mail.min.php",data:t.serialize()}).done(function(){o.value.trim().length>50&&setTimeout(function(){t.trigger("reset")},1e3)}),e.preventDefault(),!0){case 0===o.value.trim().length:$(".error__text").html("Пожалуйста, напишите сообщение..."),r.css("opacity","1"),setTimeout(function(){r.css("opacity","0")},3e3);break;case o.value.trim().length>0&&o.value.trim().length<50:$(".error__text").html("Пожалуйста, напишите подробнее..."),r.css("opacity","1"),setTimeout(function(){r.css("opacity","0")},3e3);break;default:r.css("opacity","0")}}),$(".more-wrap__link").append('<img src="img/arrow.svg" class="show-link" alt = "стрелка" style="position: absolute; right: -18px;">'),$(".more-wrap__link").append('<img src="img/arrow-red.svg" class="show-link link-r" alt = "стрелка" style="position: absolute; right: -18px; transition: opacity .15s linear;">'),r.on("mouseover",function(){$(".link-r").css("opacity","1")}),r.on("mouseout",function(){$(".link-r").css("opacity","0")}),this.portfolioItems.forEach(function(e,t){function r(e,r){e?(o.portfolioOverlays[t].style.opacity="1",r&&setTimeout(function(){o.portfolioOverlays[t].style.opacity="0"},6e3)):o.portfolioOverlays[t].style.opacity="0"}e.addEventListener("mouseenter",r.bind(null,"show")),e.addEventListener("touchstart",r.bind(null,"show","touchstart")),e.addEventListener("mouseleave",r.bind(null,null))}),this.subtitles.forEach(function(e,t){e.addEventListener("mouseover",function(e){o.twoDots[t].style.color="#f00"}),e.addEventListener("mouseout",function(e){o.twoDots[t].style.color="#333"})}),this.wrap.forEach(function(e,r){e.addEventListener("touchstart",function(e){e.preventDefault(),e.target.classList.contains("wrapR")?(o.titles[r].style.color="#fff",e.target.classList.remove("wrapR"),o.hover[r].classList.remove("hoverR"),t="hoverR"):(o.titles[r].style.color="#fff",e.target.classList.remove("wrapL"),o.hover[r].classList.remove("hoverL"),t="hoverL")}),document.addEventListener("touchend",function(e){e.preventDefault(),"hoverR"==t?(o.hover[r].classList.add("hoverL"),e.target.classList.add("wrapL"),o.titles[r].style.color="#444"):(o.hover[r].classList.add("hoverR"),e.target.classList.add("wrapR"),o.titles[r].style.color="#444")}),e.addEventListener("mouseenter",function(e){o.titles[r].style.color="#fff",e.target.classList.contains("wrapR")?(e.target.classList.remove("wrapR"),o.hover[r].classList.remove("hoverR"),t="hoverR"):(e.target.classList.remove("wrapL"),o.hover[r].classList.remove("hoverL"),t="hoverL")}),e.addEventListener("mouseleave",function(e){o.titles[r].style.color="#444","hoverR"==t?(o.hover[r].classList.add("hoverL"),e.target.classList.add("wrapL")):(o.hover[r].classList.add("hoverR"),e.target.classList.add("wrapR"))})})}},o={firstIndx:0,secondIndx:1,slidesWrapper:document.querySelector(".portfolio__wrapper"),slides:document.querySelectorAll(".portfolio__item"),arrowR:document.querySelector(".arrowR"),arrowL:document.querySelector(".arrowL"),start:function(){let e=this,t=e.slides.length-1,o=e.slides.length-2,r=200;function s(t,o){e.slides.forEach(function(s,n){s.classList.remove("active"),setTimeout(function(){s.style.display="none"},r),setTimeout(function(){e.slides[t].style.display="block",e.slides[o].style.display="block"},2*r),setTimeout(function(){e.slides[t].classList.add("active"),e.slides[o].classList.add("active")},3*r)})}this.arrowR.addEventListener("touchstart",function(r){e.firstIndx==o&&e.secondIndx==t?(e.firstIndx=0,e.secondIndx=1,s(e.firstIndx,e.secondIndx)):(e.firstIndx+=2,e.secondIndx+=2,s(e.firstIndx,e.secondIndx)),r.preventDefault()}),this.arrowL.addEventListener("touchstart",function(r){0==e.firstIndx&&1==e.secondIndx?(e.firstIndx=o,e.secondIndx=t,s(e.firstIndx,e.secondIndx)):(e.firstIndx-=2,e.secondIndx-=2,s(e.firstIndx,e.secondIndx))})}};new Typed(".animation-line",{strings:["^2500Привет, меня зовут Иван Иванов.^1250\nМне нравится заниматься разработкой,^1250\nдизайном, вёрсткой и обслуживанием сайтов^1250\n"],typeSpeed:25});e.start(),t.start(),o.start()});